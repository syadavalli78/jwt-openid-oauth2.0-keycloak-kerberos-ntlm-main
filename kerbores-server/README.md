# Kerberos Server - A Kerberos based Authentication Server and Resource for Simulation

## Description
This Java based project has been written to create two applications.
A. A KDC Server which contains the organization and users along with domain and other details

It creates the complete infrastructure needed to simulate the Key Distribution Center (KDC) on local machine. It provides collectively feature for:
- Authentication server
- Ticket Granting Service (TGS)

B. A Resource server based upon Spring Boot Web Server

It creates a web application server and it points to KDC service and protect the resource endpoint with Spring Web Security. And whenever call made to the endpoint, it authenticate the user with defined KDC.


## Use Case
This project contains source for two Spring Boot based projects, one starts the KDC service for Kerberos platform infrastructure.
The other source is for a Spring boot based web application which creates an endpoint which is protected with Spring Web Security and user authentication performed based upon Kerberos authentication mechanism where KRB5/keytab is generated by KDC service and it will point to the same KRB5 file.

The project will demonstrate the Kerberos based authentication.

## Technology Stack
- Java 8 or later
- Maven as build tool
- Kerberos platform with Minikdc


## Build
Maven has been used as build tool for this project.

Before starting build, one must have below installed properly:
- JDK 8 or later
- Apache Maven 3.5x or later

Steps:
1. Install JDK
2. Install maven
3. Build
```
mvn clean package
```
It will create JAR file which can be executed.

## Deployment 
This project is Spring Boot based project so it can be started in many ways.

Normally it is executed as:
```
java -jar <jar file name>
```

## Configuration
Since this project has two components, there are two configurations:

A. application.properties which contains the configuration related to web application

```
# Define the name of user principal
app.user-principal=client/localhost

# Define the name of service pricipal
app.service-principal=HTTP/localhost

# Define the path of keytab file generated when KDC starts
app.keytab-location=example.keytab
```

## Prerequisite: In case of Kerberos need to be tested with real Kerberos infrastructure [Not with Minikdc]
1. Domain Must be created

2. AD must be installed and join the domain

3. LDAP must be installed and configured

4. KDC must enable - telnet <machine host: on which AD installed> 88

5. GSS Flag must be enabled


#
1. A user need to be created in AD with no password expire and change - service account

2. A machine required where service need to be deployed - this machine must be joined same Domain on which AD users created

3. Need to create/map created user in step 1 with SPN where SPN will be like:

HTTP/<FQDN>@REALM

4. Generate Keytab for the created SPN

5. Create KRB5 config

6. Setup code, configure KRB5 config and keytab and test



